# ===========================================
# Legmint API - Environment Configuration
# ===========================================
# Copy this file to .env and fill in the values

# ----- Application -----
NODE_ENV=development
PORT=3000
API_BASE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3001

# ----- Database (PostgreSQL) -----
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=legmint
DATABASE_USER=postgres
DATABASE_PASSWORD=your_secure_password
DATABASE_URL=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ----- Redis (Caching & Queue) -----
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}
REDIS_TTL=3600

# ----- Authentication (JWT) -----
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRATION=24h
JWT_REFRESH_SECRET=your_refresh_token_secret
JWT_REFRESH_EXPIRATION=7d

# ----- Clerk.js (Authentication Provider) -----
# Get these from: https://dashboard.clerk.com/
CLERK_PUBLISHABLE_KEY=pk_test_xxxxx
CLERK_SECRET_KEY=sk_test_xxxxx
CLERK_JWT_KEY=your_clerk_jwt_verification_key

# ----- Stripe (Payment Processing) -----
# Get these from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=<REPLACE_WITH_sk_test_FROM_DASHBOARD>
STRIPE_WEBHOOK_SECRET=<REPLACE_WITH_whsec_xxx_AFTER_WEBHOOK_SETUP>

# Stripe Price IDs for Pro plan (create in Stripe Dashboard → Products)
STRIPE_PRICE_PRO_MONTHLY=price_xxxxx_monthly
STRIPE_PRICE_PRO_YEARLY=price_xxxxx_yearly

# Stripe Connect (Lawyer Partner Program)
# Get Connect Client ID from: https://dashboard.stripe.com/settings/connect
STRIPE_CONNECT_CLIENT_ID=<REPLACE_WITH_ca_xxx_IF_USED>

# Platform fees for lawyer referrals (€30 fixed + 15% commission)
PLATFORM_FEE_FIXED_CENTS=3000
PLATFORM_FEE_PERCENT=15

# ----- AWS S3 (Document Storage) -----
# Get these from: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=your_secret_access_key
AWS_REGION=eu-west-1
S3_BUCKET=legmint-documents
S3_PREVIEW_BUCKET=legmint-previews
S3_SIGNED_URL_EXPIRATION=86400

# ----- Email (SendGrid) -----
# Get these from: https://app.sendgrid.com/settings/api_keys
# NOTE: Titan Mail is used for founder@ and welcome@ human inboxes
# NOTE: SendGrid is used ONLY for automated transactional emails
SENDGRID_API_KEY=SG.xxxxx
EMAIL_FROM=welcome@legmint.com
EMAIL_SUPPORT=support@legmint.com

# ----- Rate Limiting -----
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX_AUTHENTICATED=100
RATE_LIMIT_MAX_UNAUTHENTICATED=10

# ----- Template Generation -----
TEMPLATE_PATH=/packs
TEMPLATE_CACHE_ENABLED=true
TEMPLATE_CACHE_TTL=3600

# PDF Generation (Puppeteer)
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser
PUPPETEER_HEADLESS=true

# ----- Referral System -----
REFERRAL_DISCOUNT_PERCENTAGE=20
REFERRAL_TOKEN_EXPIRATION=7
PARTNER_COMMISSION_PERCENTAGE=15

# ----- Logging -----
LOG_LEVEL=info
LOG_FORMAT=json

# ----- Monitoring & Error Tracking -----
# Sentry (optional)
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
SENTRY_ENVIRONMENT=development

# ----- Security -----
CORS_ORIGINS=http://localhost:3001,https://legmint.com,https://www.legmint.com
HELMET_ENABLED=true

# ----- Admin -----
ADMIN_API_KEY=your_admin_api_key_for_internal_tools

# ----- Partner Webhooks -----
PARTNER_WEBHOOK_SECRET=your_partner_webhook_secret
